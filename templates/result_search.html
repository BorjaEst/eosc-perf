{% extends "base.html" %}

{% block title %}Result Search and Selection{% endblock %}

{% block head %}
{{ super() }}
    <script type="text/javascript" src="static/scripts/view/content.js"></script>
    <script type="text/javascript" src="static/scripts/view/search_results.js"></script>
    <link rel="stylesheet" type="text/css" href="static/css/loading.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.0/styles/railscasts.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
{% endblock %}
{% block content %}
{{content|safe}}
{% endblock %}
{% block info %}
    <h1>Result Search</h1>
    <div class="flexbox">
        <input type="button" class="btn btn-info" value="Find Results" onclick="search_page.search()">
        <input type="button" class="btn btn-success" id="add_filter" value="Add Filter"
               onclick="search_page.add_filter_field()">
        <input type="button" class="btn btn-info" id="invert_selection" value="Invert Selection"
               onclick="search_page.invert_selection()">
        <input type="button" class="btn btn-secondary" id="diagram" value="Visualize"
               onclick="search_page.make_diagram()">
    </div>
    <div style="display:flex;align-content: center;justify-content: space-between">
        <div class="flexbox" style="width: 14em">
            <label for="benchmark_selection">Benchmark:</label>
            <select class="form-control" id="benchmark_selection" onchange="search_page.update_benchmark_selection()">
                <option></option>
            </select>
        </div>
    <div></div>
    </div>
    <ul id="filters" class="list-unstyled d-flex flex-column">
    </ul>
    <div style="position: relative">
        <table id="result_table" class="table">
        </table>
        <div class="overlay loading-background loading center-contents" id="loading-icon">
            <div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>
        </div>
    </div>
    <div style="display:flex;align-content: center;justify-content: space-between">
        <div>
            <nav aria-label="Page navigation">
                <ul class="pagination">
                    <li class="page-item disabled" id="prevPageButton">
                        <a class="page-link" href="#" onclick="paginator.prev_page()" aria-disabled="true">&laquo;</a>
                    </li>
                    <li class="page-item" id="nextPageButton">
                        <a class="page-link" href="#" onclick="paginator.next_page()">&raquo;</a>
                    </li>
                </ul>
            </nav>
        </div>
        <div style="display:flex">
            <label for="results_on_page">Results on page:</label>
            <select id="results_on_page" class="form-control" onchange="paginator.update_page_result_count()">
                <option value="10" selected>10</option>
                <option value="15">15</option>
                <option value="20">20</option>
                <option value="50">50</option>
                <option value="100">100</option>
            </select>
        </div>
    </div>
    <div class="modal" id="jsonPreviewModal" tabindex="-1" role="dialog" aria-labelledby="jsonPreviewModalTitle"
         aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="jsonPreviewModalTitle">JSON Data</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                </div>
                <div class="modal-body">
                    <pre><code id="jsonPreviewContent" class="json rounded" style="overflow-y: scroll;height: 50vh"></code></pre>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
          </div>
    </div>
{% endblock %}
