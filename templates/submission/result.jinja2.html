{% extends "base.jinja2.html" %}

{% block title %}Upload Result{% endblock %}

{% block head %}
    {{ super() }}
    <script src="static/js/submission/result.js"></script>
{% endblock %}

{% block pageContent %}
    <div class="container">
        <input type="hidden" id="license" value="{{ license }}" />
        <h1>Upload Result</h1><br/>
        <form action="/upload_submit" id="form" enctype="multipart/form-data" class="form-group" method="POST">
            <div class="card-columns upload-form">
                <div class="card">
                    <div class="card-body">
                        <div class="m-2">
                            <label for="result_file">Please select result JSON file:</label><br/>
                            <input type="file" class="form-control-file" id="result_file" name="file" />
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <div class="m-2">
                            <label for="bm_selection">Select benchmark:</label><br/>
                            <select class="custom-select" id="bm_selection" name="benchmark"></select>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <div class="m-2">
                            <label for="site_selection">Select execution site:</label><br/>
                            <select class="custom-select" id="site_selection" name="site"></select>
                        </div>
                        <div class="m-2" id="siteFlavorDiv">
                            <label for="siteFlavor">Select machine flavor:</label>
                            <select class="custom-select" id="siteFlavor" name="site_flavor">
                            </select>
                        </div>
                        <div class="m-2" id="siteFlavorCustomDiv">
                            <label for="siteFlavorCustom"></label>
                            <textarea class="form-control d-none" id="siteFlavorCustom" name="siteFlavorCustom"
                                      placeholder="Enter more details about your custom flavor here..."></textarea>
                        </div>
                        <div id="customSiteInfo" class="d-none">
                            <div class="m-2">
                                <label for="site_name">Site name</label><br/>
                                <input type="text" id="site_name" class="form-control" placeholder="KIT Cluster"
                                       disabled />
                            </div>
                            <div class="m-2">
                                <label for="site_address">Site address</label><br/>
                                <input type="text" id="site_address" class="form-control" placeholder="cluster.kit.edu"
                                       disabled />
                            </div>
                            <div class="m-2">
                                <label for="site_description">Site description</label><br/>
                                <input type="text" id="site_description" class="form-control" placeholder="Very good"
                                       disabled/>
                            </div>
                            <div class="m-2">
                                <label for="customSiteFlavor">Machine flavor name:</label><br/>
                                <input type="text" id="customSiteFlavor" class="form-control" placeholder="unknown"
                                       disabled/>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <div class="m-2">
                            <label for="tagSelection">Select tags:</label>
                            <div class="scrollable-dropdown">
                                <ul id="tagSelection" class="list-group"></ul>
                            </div>
                        </div>
                        <div class="m-2">
                            <label for="custom_tag">Custom tag</label>
                            <div class="input-group">
                                <input type="text" id="custom_tag" placeholder="tensor" class="form-control"
                                                                       onkeyup="upload_page.stopped_typing_tag_field()"/>
                                <div class="input-group-append">
                                    <button type="button" id="tagSubmitButton" class="btn btn-outline-success">Add Tag
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <label class="checkbox-label">
                <input class="checkbox" type="checkbox" value="" id="agreed_license"/>
                I have read and accept the
                <button type="button" class="btn btn-secondary" onclick="upload_page.show_license()">
                    License agreement
                </button>
            </label>
            <input type="submit" class="btn btn-success float-right mr-1" name="upload" value="Upload" id="submit_button"
                disabled />
        </form>
    </div>
{% endblock %}